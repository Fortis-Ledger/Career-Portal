(()=>{var e={};e.id=8225,e.ids=[8225],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30496:()=>{},43648:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47144:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>p,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>f});var s={};r.r(s),r.d(s,{GET:()=>l,POST:()=>c});var n=r(36044),o=r(63409),i=r(9576),a=r(54686),u=r(10949);async function l(){try{let e=await (0,a.U)(),{data:{user:t},error:r}=await e.auth.getUser();if(r||!t)return u.NextResponse.json({error:"Unauthorized"},{status:401});if(!["admin@fortisledger.io","admin@fortisarena.io","ahmedfaraz.sa.48@gmail.com"].includes(t.email||""))return u.NextResponse.json({error:"Forbidden"},{status:403});let s=null;try{let{data:t,error:r}=await e.from("portal_settings").select("*").single();r&&"PGRST116"!==r.code?console.error("Error fetching settings:",r):s=t}catch(e){console.log("Portal settings table not found, using defaults")}return u.NextResponse.json(s||{portal_name:"FortisLedger Career Portal",portal_description:"Join our team and build the future of financial technology",company_website:"https://fortisledger.io",contact_email:"careers@fortisledger.io",primary_color:"#0ea5e9",secondary_color:"#8b5cf6",logo_url:"",dark_mode:!0,smtp_host:"",smtp_port:"587",smtp_username:"",smtp_password:"",email_notifications:!0,require_email_verification:!0,enable_2fa:!1,public_registration:!0,session_timeout:60,max_file_size:10,auto_application_confirmation:!0,allow_multiple_applications:!1,application_deadline:30,required_fields:"Full Name, Email, Phone, Resume, Cover Letter",notify_new_applications:!0,notify_new_registrations:!0,daily_summary:!1,notification_email:"admin@fortisledger.io"})}catch(e){return console.error("Settings GET error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}async function c(e){try{let t=await (0,a.U)(),{data:{user:r},error:s}=await t.auth.getUser();if(s||!r)return u.NextResponse.json({error:"Unauthorized"},{status:401});if(!["admin@fortisledger.io","admin@fortisarena.io","ahmedfaraz.sa.48@gmail.com"].includes(r.email||""))return u.NextResponse.json({error:"Forbidden"},{status:403});let n=await e.json();try{let{data:e,error:s}=await t.from("portal_settings").upsert({id:1,...n,updated_at:new Date().toISOString(),updated_by:r.id}).select().single();if(s){if(console.error("Error saving settings:",s),"42P01"===s.code)return u.NextResponse.json({error:"Database table not found. Please run the setup script first.",setupRequired:!0,script:"f:\\fortisledger\\scripts\\006_create_portal_settings.sql"},{status:500});return u.NextResponse.json({error:"Failed to save settings",details:s.message},{status:500})}return u.NextResponse.json({success:!0,data:e})}catch(e){return console.error("Unexpected error saving settings:",e),console.log("Settings would be saved:",n),u.NextResponse.json({success:!0,message:"Settings saved successfully (fallback mode)",data:n})}}catch(e){return console.error("Settings POST error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/admin/settings/route",pathname:"/api/admin/settings",filename:"route",bundlePath:"app/api/admin/settings/route"},resolvedPagePath:"F:\\fortisledger\\app\\api\\admin\\settings\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:f,serverHooks:m}=p;function g(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:f})}},50823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return u}});let s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(s,i,a):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}(r(83263));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}let o={current:null},i="function"==typeof s.cache?s.cache:e=>e,a=console.warn;function u(e){return function(...t){a(e(...t))}}i(e=>{try{a(o.current)}finally{o.current=null}})},54686:(e,t,r)=>{"use strict";r.d(t,{R:()=>i,U:()=>o});var s=r(51375),n=r(15886);async function o(){let e=await (0,n.UL)();return(0,s.createServerClient)("https://samxmwiyhkencakujwgb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNhbXhtd2l5aGtlbmNha3Vqd2diIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MjkxNTcsImV4cCI6MjA3MjQwNTE1N30.S5tFj2ObP3N12jXTI-FSS9tWCmIRAH7VgLmSB2Hz8dg",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:s})=>e.set(t,r,s))}catch{}}}})}async function i(){return await o()}},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7095,2410,1292,2920],()=>r(47144));module.exports=s})();